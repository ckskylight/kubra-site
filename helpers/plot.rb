data = "0.018066 -0.324463 -0.089111
0.047119 -0.303223 -0.163574
0.027588 -0.371826 -0.139404
-0.038086 -0.607178 0.112793
-0.056641 -0.623047 0.131104
-0.054199 -0.649902 0.195068
-0.010986 -0.578369 0.161377
0.019287 -0.582275 0.256592
-0.048096 -0.205078 -0.105957
0.028320 -0.174561 0.001465
-0.053955 -0.073975 -0.080811
0.023193 0.051270 -0.165283
0.054688 0.051270 -0.091797
-0.007080 0.128418 -0.208252
-0.033203 0.146973 -0.130859
0.121094 0.229248 -0.289307
0.103760 0.262451 -0.326904
0.174561 0.232666 -0.380371
0.162354 0.042236 -0.203613
0.055664 0.087158 -0.443359
0.231689 -0.278320 -0.235107
-0.021973 -0.568359 0.235352
-0.132813 -0.282471 -0.249268
0.195312 -0.312256 -0.332031
0.171387 -0.669678 -0.040039
-0.359375 -0.794189 0.028320
-0.288330 -0.722656 -0.100586
-0.079346 -0.822998 0.046387
-0.128174 -0.826172 0.030029
-0.070801 -0.783936 -0.038574
0.087158 -0.796631 -0.024658
-0.249023 -0.866699 0.107178
-0.254883 -1.042725 0.387207
-0.147217 -0.876221 0.182617
-0.102783 -0.344971 -0.405029
-0.092041 -0.192627 -0.302490
0.023926 -0.154053 -0.197266
0.010254 -0.158691 -0.115479
-0.144287 -0.053467 -0.288818
-0.207520 -0.010010 -0.287354
-0.075195 0.035889 -0.191162
-0.006104 0.027100 -0.156982
-0.062500 0.061523 -0.211426
-0.125732 0.046143 -0.116455
-0.115479 -0.041992 0.077148
-0.131104 0.000244 0.014160"

data2 = "0.087891 -0.248291 -0.080078
0.063477 -0.245605 -0.094482
0.029541 -0.308105 0.030762
0.065674 -0.505371 0.373291
0.007568 -0.502930 0.404541
0.055908 -0.388672 0.215820
0.064697 -0.341064 0.159668
0.017334 -0.211914 -0.063477
0.161377 -0.066650 -0.142578
0.090576 -0.023193 -0.136475
0.029297 -0.061035 -0.075195
-0.081299 -0.016357 -0.065430
0.170898 0.032471 -0.200195
0.153076 0.100342 -0.397705
0.200928 0.086670 -0.426758
0.252197 0.024170 -0.392334
0.198242 -0.087891 -0.281250
0.064453 -0.121338 -0.201416
0.006348 -0.129883 -0.296875
0.074707 -0.199219 -0.253418
0.138428 -0.247559 -0.266113
0.114014 -0.448486 -0.092529
-0.159180 -0.668945 0.344238
-0.129150 -0.504883 0.045654
-0.017822 -0.426514 -0.095215
0.109863 -0.595703 0.080322
-0.112305 -0.675537 0.189209
-0.124023 -0.806885 0.381836
-0.096436 -0.806152 0.426025
0.057861 -0.692139 0.252930
0.099854 -0.685547 0.289062
-0.055908 -0.680908 0.256348
-0.126953 -0.619873 0.155273
-0.067383 -0.362061 -0.164551
0.103516 -0.215576 -0.342041
0.102539 -0.222168 -0.191162
0.079102 -0.135742 -0.271973
0.091797 -0.079834 -0.345947
-0.102539 -0.041992 -0.372314
0.065430 -0.070313 -0.225342"

data = data.split("\n").map { |l| l.split(' ').map(&:to_f) }

def integrate(matrix)
  matrix.each_with_index.map do |row, i|
    if i == 0
      row
    else
      (0..2).each do |j|
        row[j] += matrix[i-1][j]
      end
      row
    end
  end
end

puts data.transpose[2]
puts integrate(data).inspect
integrate(integrate(data)).map { |r| puts "#{r[0]} #{r[1]} #{r[2]}" }
